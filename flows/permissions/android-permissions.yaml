# Android Permissions Flow
# Handles Android-specific permission dialogs with enhanced logging

appId: com.scopex.scopexmobilev2
name: "Android Permissions"
tags: ["android", "permissions"]

---
# Start recording for permission handling
- startRecording:
    path: 'android-permissions'
    label: 'Android Permission Dialogs'
    optional: true

# Handle common Android permission dialogs with logging
- evalScript: ${console.log("Handling Android permissions...");}

- tapOn:
    id: "com.android.permissioncontroller:id/permission_allow_button"
    optional: true
- tapOn:
    id: "com.android.permissioncontroller:id/permission_allow_foreground_only_button"
    optional: true
- tapOn:
    id: "com.android.permissioncontroller:id/permission_deny_button"
    optional: true

# Handle location permissions
- tapOn:
    text: "Allow"
    optional: true
- tapOn:
    text: "While using app"
    optional: true
- tapOn:
    text: "Allow all the time"
    optional: true

# Handle notification permissions
- tapOn:
    text: "Allow"
    optional: true
- tapOn:
    text: "Don't allow"
    optional: true

# Handle camera permissions
- tapOn:
    text: "Allow"
    optional: true
- tapOn:
    text: "Deny"
    optional: true

# Handle contacts permissions
- tapOn:
    text: "Allow"
    optional: true
- tapOn:
    text: "Deny"
    optional: true

# Handle microphone permissions
- tapOn:
    text: "Allow"
    optional: true
- tapOn:
    text: "Deny"
    optional: true

# Stop recording and log permission handling completion
- stopRecording
- evalScript: ${console.log("Android permissions handled successfully"); output.androidPermissionsHandled = true;}
